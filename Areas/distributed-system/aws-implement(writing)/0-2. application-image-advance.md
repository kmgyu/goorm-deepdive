시스템을 만들던 중 추가로 생각해보아야 할 점이 생겼다.

도커 파일을 통해 이미지를 빌드하고, 간편하게 배포하여 테스트할 수 있다는 점은 좋다.
그런데 레디스 컨테이너를 만들면서 이걸 어떻게 연결해줘야 할 지 문제점에 봉착했다.

어플리케이션이 의존성이 높은 것도 문제이지만 레디스가 열려있는 포트가 기본값인 6379와 다를 수도 있고, 클러스터를 쓸 수도 있고... 아무튼 다양할 수 있다!
그럼 이제 이걸 우리가 많이 본 방식인 매개변수를 개발자가 넣어서 직접 사용할 수 있도록 개선해보자.

[참고 자료](https://wooono.tistory.com/670)

### 이미지 빌드 시 Dockerfile 내부로 매개변수 전달

- Dockerfile
```dockerfile
# FROM절 이전에 선언한 매개변수는 FROM절 이전에만 사용할 수 있습니다. 
ARG imageversion 

FROM python:${imageversion} 

# FROM절 이후에 선언한 매개변수는 FROM절 이후에만 사용할 수 있습니다. 
ARG foldername 

RUN mkdir ${foldername}
```
입력 받을 매개변수를 미리 선언한다.

```bash
docker build -t <image-name> . --build-arg imageversion="3.9.15" --build-arg foldername="hello"
```
원하는 매개 변수 개수만큼 --build-agr 옵션을 할당해야 한다.

### 컨테이너 생성 시 컨테이너 내부로 환경 변수 전달

해당 방식은 2가지 방법이 존재한다.

- 도커파일 내부 환경변수 선언
```dockerfile
FROM pyton:3.9.15

# 컨테이너 내부에 적용할 환경변수 설정
ENV foldername=hello
```

- 컨테이너 생성 명령 시 환경변수 전달
```bash
docker run -d -it -e foldername=hello <image-name> /bin/bash
```
원하는 환경 변수 개수만큼 -e 옵션을 할당해야 한다.

적용된 환경 변수는 컨테이너 접속 후 env 명령어를 통해 확인 가능

