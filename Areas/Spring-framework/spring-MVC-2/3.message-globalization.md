메시지, 국제화를 해볼 것임.

메시지
화면에 보이는 문구가 마음에 들지 않으므로 상품명을 상품으로 바꾸라고 한다면? 폼을 어떻게 수정할까?
수십 개 파일에 분산되어 있을 경우 힘들어진다.

여기서 잘하는 개발자와 못하는 개발자 차이가 발생함. 유연한 개발을 하면 더 좋은 개발자..


messages.properties라는 메시지 관리용 파일을 만들면 각 html은 해당 데이터를 key 값으로 불러서 사용하게 된다.


국제화
메시지 개념을 더 넓게 바라본다.
각 나라별로 별도로 관리하면 서비스를 국제화할 수 있다.


메시지 소스 설정
MessageSource를 스프링이 제공해주는데, 이걸 빈으로 등록해주면 된다.
basenames : 설정파일 이름 지정
messages로 지정하면 messages.properties 파일 읽어서 사용한다.
국제화 기능 적용 시 파일명 마지막에 `_en`형태로 파일명 마지막에 언어 정보를 줄 수 있다. 국제화 파일이 없으면 언어정보가 없는 파일명을 기본으로 사용한다.
여러 파일을 한번에 지정할 수 있다.

defaultEncoding : 인코딩 정보를 지정한다. utf-8을 사용하면 된다.

스프링 부트 메시지 소스 기본 값
spring.messages.basename=messages
다른 옵션은 스프링 메뉴얼 - projects - springboots - application properties에서 확인 가능

메시지를 만들 때 {0}과 같이 패러미터를 넣어주는 것도 가능하다.
인텔리제이 얼티밋은 리소스 번들링도 지원해줌

---

## 메세지 소스 사용

messageSource.getMessage(code, args, locale)

locale 정보가 없으면 basename에서 설정한 기본 이름 메시지 파일을 조회한다.
null이거나, 존재하지 않는 국가 언어 설정 시에도 동일하게 기본 이름 메시지 파일 조회.

**기본 메시지가 없을 시?**
notFound 시 assertThatThrownBy로 원하는 익셉션이 나오는 지 확인 가능
NoSuchMessageException이 발생함.

스프링 부트는 관례에 따라 messages.properties 파일을 자동으로 찾아 MessageSource 빈을 등록해주어 개발자가 직접 설정할 일이 없다.

---

## 웹 어플리케이션에 메시지 적용

빈으로 등록하고 복잡한 기능 구현하고...
이런 것들을 더 편리하게 적용하는 방법


타임리프 메시지 표현식 `#{...}` 적용 시 스프링 메시지 편리하게 조회 가능
label.item.itemName과 같이 조회 가능


---

## 국제화 적용

`message_en`과 같이 추가해준다.
영어로 번역해주면 작업 끝남.

> 브라우저 locale 변경법
> 설정 - 언어 - 언어 변경하여 브라우저 locale 수정 가능

스프링 국제화 메시지 선택
Accept-Language 헤더 값을 사용한다.

LocaleResolver
스프링은 Locale 선택 방식을 변경할 수 있도록 해당 인터페이스를 제공한다.
스프링 부트는 기본으로 Accept-Language를 활용하는 AcceptHeaderLocaleResolver를 활용한다.

