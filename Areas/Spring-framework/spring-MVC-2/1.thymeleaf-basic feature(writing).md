
타임리프 특징
- SSR
  타임리프는 백엔드 서버에서 html을 동적 렌더링하는 용도로 사용
- 내츄럴 템플릿
  [[8. spring-mvc-webpage]]
  참고.
- 스프링 통합 지원
  타임리프와 스프링은 자연스럽게 통합되고, 스프링의 다양한 기능을 편리하게 사용할 수 있게 지원함.

---

# text, utext

### html 엔티티
`<b>`와 같은 태그를 출력 시 문자로 표현할 수 있는 방법 필요.
이것을 html 엔티티라고 함. 특수 문자를 html 엔티티로 변경하는 것을 이스케이프 라고 한다!
th:text, `[[...]]`는 기본적으로 이스케이프를 제공한다.
`<` -> `&lt`
`>` -> `&gt`
기타 수많은 html 엔티티 존재

> 추가 내용은 검색할 것.

Unescape
이스케이프 기능을 사용하지 않으려면 utext를 사용한다.

th:utext, `[(...)]`를 이용하면 unescape 기능을 이용할 수 있다.

왜? 이스케이프 처리를 할까?
사용자가 임의로 작성한 태그들 때문에 스타일이 깨질 수 있다. (언급 안했으나 script같은 태그 넣으면 보안 문제 발생 가능. gpt는 출력 인코딩 미비에 따른 XSS로 분류할 수 있다고 한다...?)
태그도 사용하도록 의도할 경우 언이스케이스 처리를 하는 것이 맞다.

---

# Spring EL

변수 표현식? `${...}`

> 가끔씩 인텔리제이가 문법 오류를 만들 때도 있다고 함.

스프링 EL 표현식들

`${user.username}`을 하게 되면 오브젝트에서 바로 접근하는 것이 아니라, getter를 이용해서 가져온다고 한다. 그냥 getter 표현식도 가능함.
`['username']` 같은 식으로도 가져올 수 있다.

List의 경우, `[0]`처럼 인덱스 넣어서 쓸 수 있다. 필드 접근은 오브젝트와 동일

Map의 경우 `['user']`처럼 사용해준다. JS랑 유사함. 필드 접근은 이것도 동일함.

타임리프도 지역변수 선언이 가능핟.ㅏ
th:with = `fisrt=${users[0]}`
이런식으로 활용 시, first라는 지역변수를 활용할 수 있다.

---

# 기본 객체들

session 맛뵈기

request, response, session, servletContext, locale

예시
${#request}
${session.sessionData}
또는 빈도 직접 접근 가능함.

---

# 유틸리티 객체와 날짜

문자, 숫자, 날짜, URI 등을 편리하게 다루는 다양한 유틸리티 객체가 존재함.

타임리프 공식문서에서 예제를 잘 설명해준다!

자바 8 날짜
LocalDate, LocalDateTime, Instant 사용 시 추가 라이브러리가 필요한데, 타임리프 라이브러리에 포함되어있다.

`#temporals` 사용 가능!
`${#temporals.format()}` 해서 포매팅도 가능하다. 기능 많음.

---

# URL 링크

`@{...}`를 사용한다

`@{/hello(param=${param1}, param2=${param2}`
param1, param2를 query parameter로 받기

`@{/hello/{param1}/{param2}(param=${param1}, param2=${param2}`
param1, param2를 path variable로 받기

`@{/hello/{param1}(param=${param1}, param2=${param2}`
섞어 쓰기. param1은 패스, 2는 쿼리...

---

# 리터럴

리터럴은 소스 코드 상에서 고정된 값을 말하는 용어다.
리터럴로 문자, 숫자, 불린, null 과 같은 것이 있다.

타임리프에서 문자 리터럴은 항상 작은 따옴표로 감싸야 한다.
`'hello!'`
근데 항상 `'`로 감싸는건 너무 귀찮다.
다음과 같이 작은 따옴표를 생략할 수 있다.
`th:text="hello"`

`th:text="hello world"`
문자 리터럴은 원칙상 `'`로 감싸야 하기 때문에, 공백이 있다면 의미있는 토큰으로 인식되지 않는다.
`'hello world'`와 같이 감싸주어야 한다.
문자열 리터럴은 더해주거나, 리터럴 대체를 사용해야 한다.
`|hello ${data}|` 처럼 사용할 수 있다! 데이터와 문자 리터럴 혼용 시 이렇게 해주면 된다.

---

# 연산

자바와 크게 다르지 않지만, html 엔티티를 사용하는 부분은 주의해야 한다.

비교 연산
```
&gt, gt, ge 같은 거 쓴다...
```

조건식
```
? :
```

Elvis 연산자
조건식을 편하게 쓸 수 있다.
데이터 없는지 확인할 때 씀.
```
${data}?: '데이터가 없습니다'
```
있으면 데이터 출력...

비교연산 : HTML 엔티티 사용 부분 주의
`>`는 `&gt`, `<`는 `lt`... 
조건식은 자바 조건식과 유사하다.
Elvis 연산자는 조건식의 편의 버전이다.
No-Operation `_`인 경우 마치 타임리프가 실행되지 않는 것처럼 동작하며, 활용할 시 html의 내용을 그대로 활용할 수 있다.
i.e. `${data}?: _`



