request에서 getParameter로 가져올 시 문자열을 가져오게됨.

@RequestParm과 같이 스프링이 중간에서 타입을 중간에 반환해주기 때문에 편리하게 사용할 수 있다.

타입 변환 예시
@RequestParma, @ModelAttribute, @PathVaraible 등...
xml 스프링 빈 정보 변환, 뷰 렌더링 등

새로운 타입을 만들어서 변환할 시 어떻게 하는가?

스프링은 확장 가능한 컨버터 인터페이스를 제공함.

# Converter

컨버터의 가장 기본적인 부분을 살펴보자.

Converter라는 이름의 인터페이스는 매우 많다.
`org.springframework.core.convert.converter.Converter`
이 경로를 기억해두자! 다른 컨버터를 사용할 수 있으니 주의할 것

String to Integer Converter 예제
```java
@Slf4j
public class StringToIntegerConverter implements Converter<String, Integer> {
 @Override
 public Integer convert(String source) {
 log.info("convert source={}", source);
 return Integer.valueOf(source);
 }
}
```

```java
class ConverterTest {
 @Test
 void stringToInteger() {
 StringToIntegerConverter converter = new StringToIntegerConverter();
 Integer result = converter.convert("10");
 assertThat(result).isEqualTo(10);
 }
 @Test
 void integerToString() {
 IntegerToStringConverter converter = new IntegerToStringConverter();
 String result = converter.convert(10);
 assertThat(result).isEqualTo("10");
 }
}
```
Integer to String Converter도 만들어볼 수 있다. 여기서는 생략했다.

## 사용자 정의 타입 컨버터

이번엔 사용자가 정의한 타입으로 변환하는 컨버터이다.
```java
@Getter
@EqualsAndHashCode
public class IpPort {
 private String ip;
 private int port;
 public IpPort(String ip, int port) {
 this.ip = ip;
 this.port = port;
 }
}
```

**@EqualsAndHashCode?**
equals와 hashcode 사용 시 모든 필드를 사용한다.
모든 필드의 값이 같다면 같은 객체를 가리킨다고 판정한다...!

```java
@Slf4j
public class StringToIpPortConverter implements Converter<String, IpPort> {
 @Override
 public IpPort convert(String source) {
 log.info("convert source={}", source);
 String[] split = source.split(":");
 String ip = split[0];
 int port = Integer.parseInt(split[1]);
 return new IpPort(ip, port);
 }
}
```

```java
@Slf4j
public class IpPortToStringConverter implements Converter<IpPort, String> {
 @Override
 public String convert(IpPort source) {
 log.info("convert source={}", source);
 return source.getIp() + ":" + source.getPort();
 }
}
```

문자를 IpPort로, IpPort를 문자로 만드는 컨버터다.

```java
@Test
void stringToIpPort() {
 StringToIpPortConverter converter = new StringToIpPortConverter();
 String source = "127.0.0.1:8080";
 IpPort result = converter.convert(source);
 assertThat(result).isEqualTo(new IpPort("127.0.0.1", 8080));
}
@Test
void ipPortToString() {
 IpPortToStringConverter converter = new IpPortToStringConverter();
 IpPort source = new IpPort("127.0.0.1", 8080);
 String result = converter.convert(source);
 assertThat(result).isEqualTo("127.0.0.1:8080");
}
```

이런 식으로 사용자 정의 타입도 컨버터를 이용할 수 있다.

> 스프링은 용도에 따라 다양한 방식의 타입 컨버터를 제공한다. 
> Converter 기본 타입 컨버터
> ConverterFactory 전체 클래스 계층 구조가 필요할 때
> GenericConverter 정교한 구현, 대상 필드의 애노테이션 정보 사용 가능
> ConditionalGenericConverter 특정 조건이 참인 경우에만 실행
> 자세한 내용은 공식 문서 참고
> https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#core-convert


> 스프링은 문자, 숫자, 불린, Enum등 일반적인 타입에 대한 대부분의 컨버터를 기본으로 제공한다. IDE에서 Converter, ConverterFactory, GenericConverter의 구현체를 찾아보면 수 많은 컨버터를 확인할 수 있다


# ConversionService

타입 컨버터를 사용자가 직접 찾아서 타입 변환에 사용하는 것은 바람직하지 않다.
스프링은 개별 컨버터를 모아두고 그것들을 묶어 편리하게 사용할 수 있도록 ConversionService 기능을 제공한다.


컨버전 설명

SOLID - ISP 원칙

잘보면 인터페이스를 분리했다.
ConversionService, ConversionRegistry
각각 사용과 등록에 초점을 맞춤.

결과적으로 컨버터 사용 클라이언트는 꼭 필요한 메서드만 알게 된다.

