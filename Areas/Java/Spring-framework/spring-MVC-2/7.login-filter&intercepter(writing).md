서블릿 필터

공통 관심 사항 때문에 필요하다.
로그인 안한 사용자는 items 이런 곳에 들어오면 안된다.
로그인 하지 않은 사용자들도 버튼 눌러서 들어갈 수 있다!

컨트롤러에서 로그인 여부 체크하는 로직을 만들면 되지만, 상품 등록, 상세, 전체 핸들러에 로직을 다 추가해줘야 한다!
개발자는 반복 작업이 싫다. 심지어 로직이 변경이 되면 이것들을 다 수정해줘야 한다.

이런 여러 로직에서 공통으로 관심 있는 것을 공통 관심사라고 한다.
여기선 인증에 대한 관심을 가지고 있다.

스프링 AOP로도 해결 가능하다.
그러나 서블릿 필터, 인터셉터 사용이 좋다. (이것에 대한 이유는?)
웹 관련 공통 관심사 처리 시에는 HTTP 헤더나 URI 정보가 필요한데, 서블릿 필터나 스프링 인터셉터는 `HttpServletRequest`를 제공한다.

그 외에도 수많은 웹 관련 부가기능도 제공해줌
aop는 그냥 어떤 게 호출되고 이 정도만 알 수 있다.

# 서블릿 필터 소개
서블릿이 지원하는 수문장

필터 특성은 다음과 같다.
```
HTTP request - WAS - filter - servlet - controller
```
필터 적용 시 필터 호출 뒤 다음 서블릿이 호출됨.
모든 고객이 요청 로그 남기는 요구사항 있다면 필터 사용하면 됨

특정 URL 패턴에 적용 가능.
`/*`이런 것.

스프링 사용 시 여기서 말하는 서블릿은 디스패치 서블릿으로 생각하면 됨.


필터 제한
필터에서 적절하지 않은 요청이라고 판단하면 거기서 끝낼수도 있다.
그래서 로그인 여부 체크하기 좋다.

필터 체인
```
WAS - 필터1 - 필터2 - 필터3 - ...
```
위와 같이 중간에 필터 자유롭게 추가 가능


필터 인터페이스
필터 인터페이스 구현, 등록 시 서블릿 컨테이너가 필터를 싱글톤 객체로 생성 및 관리

`init()`
필터 초기화 메서드, 서블릿 컨테이너 생성 시 호출

`doFilter()`
고객 요청 올 때마다 해당 메서드 호출, 필터 로직 구현

`destory()`
필터 종료 메서드, 서블릿 컨테이너 종료 시 호출

---

