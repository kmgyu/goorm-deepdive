성능 향상하는 방법에 대해 알아본다.
완성도 높은 시스템을 개발하려면 기능 외에도 성능, 신뢰성, 보안 등 고려할 요소가 많다. 이 중 성능을 향상시키는 방법을 알아보자.

# 4.1. 시스템 성능

어떤 물건 또는 기계가 성질과 능력치를 말한다. 성능 주체가 시스템이기 때문에 시스템 성능이라는 표현을 자주 사용한다.
시스템이 수행할 수 있는 작업량을 의미하기도 한다. 단위 시간 동안 목표한 작업량보다 더 많이 처리 시, 성능이 좋다고 한다.

모든 시스템이 높은 수준의 성능이 요구되는 것이 아님.
- 적은 사용자는 성능 중요하지 않음.
- 많은 사용자라면, 성능 고려가 필수적

그래서 성능 고민은 주로 대량의 작업을 신속하게 처리하는 시스템을 개발해야 할 때 시작된다.

시스템 성능에서 `시스템`은 하드웨어와 소프트웨어를 아우름.
- 소프트웨어의 성능이 뛰어나더라도 하드웨어가 뒷받침되지 않으면 우수한 성능을 내기 어려움.
- 반대로 하드웨어가 뛰어나더라도 소프트웨어가 활용하지 못하면 무용지물이 됨.


### 동시 사용자의 중요성

동시 사용자에 따라 서버가 할 작업량이 결정된다.
시스템의 사용자가 5000명이라고 해서 전원이 동시에 접속하지는 않는다.
따라서 성능 고민 시 전체 사용자가 아닌, 시스템 실제 접속하는 동시 사용자를 고려해야 한다.

서버에 요청을 보내거나, 응답을 기다리거나, 응답 결과를 읽는 사람 모두 동시 사용자에 포함된다.

**어떻게 알아낼까?**

보통은 현재 운영 시스템의 로그를 분석해 동시 사용자 수를 가늠한다.
신규 시스템의 경우, 합리적인 방법으로 계산한다.
- 유사 시스템의 동시 사용자 수 분석
- 서비스 가입자 수 고려, 동시 사용자 수 예측

**추천하는 도구**

구글 애널리틱스
웹사이트 트래픽 분석에 유용
웹사이트 속도도 확인 가능. 페이지 로딩 시간, 서버 응답 시간, 페이지 다운로드 시간 등 여러 지표로 웹사이트 속도를 가시화한다.


응답 시간은 시스템 성능에서 매우 중요한 요소 중 하나이다.
응답시간 : 사용자가 서비스 요청 시점부터, 서버가 요청 처리 후 사용자에게 도달하기까지 걸리는 시간

구글은 응답시간을 2초 이내로 유지하는 것을 권장함.

# 4.2. 병목지점

시스템이 느려지는 지점


```
인터넷 - 방화벽 - L4 스위치 - 방화벽 - Web Server - 방화벽 - WAS - DB Server
```
웹 시스템의 구성도 예시

시스템을 구성하는 서버들 중 하나라도 느리게 동작한다면 전체적인 웹 서비스 속도에 지장을 준다.

**시스템 성능 측정**

시스템 성능이 느려지는 요소는 소프트웨어 뿐이 아니다., 하드웨어 자원 부족으로 인해 느려질 수도 있다. 따라서 각 서버의 cpu, 메모리 등 자원 사용률을 측정하는 것은 성능 분석의 첫 번째 단계이다.

시스템 성능이 떨어질 경우, 병목 지점을 찾아내기 위해 성능 시험을 시행해 각 서버의 성능을 진단한다.
목적에 따라 부하 시험, 스트레스 시험, 스파이크 시험 등으로 분류된다.

> **부하시험 (workload test)**
> 시스템에 작업을 많이 던져서 감당할 수 있는지 확인하는 시험
> 작업량은 시스템 사용 환경, 사용자 인원, 작업 종류 등에 따라 바뀜.
> i.e. 출퇴근 시스템의 경우 출근 및 퇴근 시 동시 접속자 수가 폭증하며 사용자 수가 동시 접속자와 근사할 수 있다.

성능 시험에서는 테스트를 위해 가상 사용자를 만든다. 실제 사용자처럼 웹 페이지에서 입력 필드에 값을 넣거나, 링크를 클릭하는 등의 작업을 통해 서버에 부하를 가한다.
Jmeter와 LoadRunner가 대표적이며, 이에 대해 6장에서 언급한다고 함.


**성능 측정을 위한 지표**

대표적 지표 
- 응답 시간
- 처리량
- CPU
- 메모리 사용량

> 처리량?
> 단위 시간 동안 처리하는 작업량
> 단위 : TPS (Transaction Per Second)

트랜잭션 단위는 어떻게 정의하느냐에 따라 달라진다.
(1장에서도 언급했다는 데 직접적인 표현을 확인하지 못함. 그냥 트랜잭션 크기 말하는 것 같음...)


