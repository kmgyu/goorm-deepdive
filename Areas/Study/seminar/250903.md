안돼 선점당했당~

수호님 발표
OAuth다.

Open Authorization

제3자 인증 제공자를 통해 프로필 정보, 이메일 등에 대한 접근 권한 위임 받을 수 있도록 한다.

주요 요소
- Accesstoken
API 요청하기 위한 인증키
이걸 통해 sns 로그인한 사용자 정보 조회 요청
- 인가 코드
액세스 토큰 발급받기 위한 키갑
화면 제어권이 제3자로 넘어가서 redirect 형식으로 사용자 정보 받아와야 함
302는 get 요청 발생시키므로 body를 포함할 수 없음
액세스 토큰 또는 사용자 정보 등 민감정보를 url로 받게 되면 브라우저 상에 남아있을 보안 취약점 존재, 인가코드 발급해 액세스 토큰을 발급함.
- 스코프
제3자 서버로부터 받아올 수 있는 이메일, 프로필 정보 등 사용자 정보의 범위

구현 방식
1. 프론트 인가코드 받고 서버에서 액세스코드 발급
2. 서버에서 인가코드 및 액세스 코드 발급 방식

인가코드 누가 받느냐에 차이
프론트가 먼저 발급받는 방식이 많다고 함.

1번
장점
사용자가 서버로부터 jwt 토큰 받을 때 안전하게 바디를 통해 값 받기 가능
직관적이고 문제 생긴 위치 알 수 있다
단점
보안


2번
요청이 한꺼번에 진행되어 구현 간결
서버측에서 관리하므로 안전하게 보관
단점
사용자에게 jwt 토큰 줄 때 리디렉션 방식 취할 수 밖에 없어 보안상 취약점 존재
모든 절차가 라이브러리를 통해 통합되어 있고, 자동화가 되어 있어 코드파악의 어려움과 디버깅의 어려움 존재
인가코드 리디렉션될 때 인가코드 요청했던 동일 서버가 아닌 경우 문제 발생

로드밸런서에서 별도로 sticky 옵션을 지정해줄 필요가 있다고 함.

> 서버에서 언제 어떻게 알아서 로그인하지?
> 사이트에서 구글 로그인 누르는 순간 서버 엔드포인트로 향하게끔 하고, 서버가 구글에 요청하는 방식으로 만들어졌다고 함.


---

JWT

header
알고리즘, 토큰 타입

payload
데이터 들어감

signature
헤더와 서버가 가진 비밀키로 암호화
헤더와 서버는 `.`을 기준으로 분리된다.

헤더, 페이로드, 시그니쳐 또한 `.`을 기준으로 분리된다.

별도 세션을 지정하지 않아도 되며, 무상태 인증 방식이라 확장에 유리
필요 정보를 담고 있어 인증 시 빠르게 처리할 수 있다.


https://www.inflearn.com/course/sns%EB%A1%9C%EA%B7%B8%EC%9D%B8-oauth-springboot-vue
스프링 OAuth 구현하기 강의가 있어서 보는 거 추천한당