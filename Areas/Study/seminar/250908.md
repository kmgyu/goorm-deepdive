준영님 발표

카프카 2

카프카로 producer-consumer와 메시지 교환 실습
이번에는 실무에서 온라인 쇼핑 애플리케이션에 주로 사용되는 주문 서비스 실습


application.yml 세팅

Events랑 DTO의 차이
카프카에서 사용하는 단위다.


Restful한 구조로 MVC를 구성해줬다?
MVC... 음. Representation 레이어다.

OrderEventProducer
아하 서비스 레이어
카프카를 사용하려면 Producer와 Consumer가 필요하다.
기존 코드와 다르나, 구조는 비슷하다.

카프카 config 파일 갖고와서 producer 생성해주고 consumer 생성해주고 구조 자체는 똑같다?

쿠팡 같은 대형 서비스의 경우 대부분 이런 구조일 것임.

실행할 때는 에러 뜬다. 게이트웨이 설정 안해주면 이렇다.
MSA때 유레카 서버에 9000번 포트 세팅해줬던 그거.


---

그래서 아파치 카프카란?

분산 데이터 스토어로 실시간 스트리밍 데이터를 수집, 처리하는 데 최적화
스트리밍 데이터 : 수천 개 데이터 원본에서 연속적으로 생성되는 데이터

주요 기능
- 레코드 스트림 게시 및 구독
- 레코드 생성 순서대로 저장
- 레코드 스트림 실시간 처리
목적?
노션에서 확인


카프카 작동 방식
대기열 + 게시-구독 모델 결합

용어가 잘 기억 안나는 데 알려주는 패턴이 있다고 함.
가장 잘 알려진 예시가 카프카
옵저버 패턴 아님?


카프카 vs 래빗MQ
질문에 대한 답변
전반적으로 메시징 큐를 사용하고 비슷한 점이 많다.
래빗 MQ는 소비 시 삭제해야 하고, 차이점이 많음.
패러다임이 다르다고 봐야하지 않을까?
프로토콜도 다양함.


AWS에서 카프카 지원
AWS 적용해서 확장시켜볼까 라는 생각을 갖고 있다!

로우 시스템 구현 추천
여러 어플리케이션이 상호작용을 할 텐데 중앙에서 클러스터링 연결을 해줄텐데, 이걸 어떻게 할 건지

카프카를 통해 여러 어플리케이션이 왔다리갔다리 메시지 컨슈밍

컨셉
raise condition, 트랜잭션에서 예외처리 최대한 안되는 것?
이게 왜 이렇게 설계되었는지 알아보면 좋은 공부가 될 듯
