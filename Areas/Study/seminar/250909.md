수호님 발표

OS

정의와 주요 기능
- 시스템 자원과 동작 관리
- cpu, 메모리, io, 디스크 등 하드웨어 자원 관리
등등등


용어 정리
사용자 모드와 커널 모드
사용자 모드
- 일반 프로그램 실행 위치
커널 모드
- 운영체제 실행 모드
- 모든 시스템 자원 접근 가능, 높은 권한으로 작동
- 시스템 제어하는 중요 작업

시스템 콜
커널 모드에서만 실행할 수 있는 보안이 요구되는 명령을 특권 명령
사용자 프로그램이 특권명령 실행위해 OS에게 이명령 대신해줄 것을 요청
이게 시스템 콜

트립
사용자모드 - 커널모드 - 사용자모드 과정?

번호가 함수 인자 등등이 레지스터등에 담겨 도달

시스템 콜 핸들러
전달받은 시스템 번호 확인뒤에 해당함수 호출

커널 함수가 실행마치면 결과값이나 에러코드가 레지스터에 저장, 반환

cpu는 사용자모드로 전환

이게 시스템콜 동작방식

입출력 동기 비동기
동기
입출력 명령 결과 기다리는 동안 다음 명령 수행하지 않고 기다림
비동기
입력 후 기다리지 않고 다음 프로세스 시행

> 동기 비동기 블로킹 논블로킹 차이는?


프로세스
프로세스 정의 및 주소 공간
프로세스
실행중인 프로그램
및 주요 용어


프로세스 상태

new, ready, running, blocked, terminated, suspended

terminated zombie
자식 프로세스가 부모 프로세스에게 종료 신호를 알렸을 때
부모가 인지할 시 terminated로 넘어감

blocked는 cpu가 할당되었는데 작업을 못한 상태. IO 작업 실행중

suspended?
당장 사용하지 않는 프로세스를 통째로 디스크로 쫓아냄. 이렇게 통째로 뜯겨나간 상태

스레드마다 별도 스택 가짐


멀티 스레딩
응답성 향상
자원 공유
비용절감
병렬처리로 성능 향상

스레드 간 공유자원이 문제

cpu 스케줄링
cpu에 어떤 프로세스 할당할 지 결정하는 과정

성능 척도
cpu 이용률
- 전체 시간 중 cpu 일하는 시간
처리량
대기시간
응답시간
소요시간

선점, 비선점
선점
SRTF, priority, 라운드 로빈

비선점
FCFS, SJF

프로세스 동기화
경쟁 상태 (Race Condition)
두 개 연산이 동시에 공유 자원 접근 시 결과가 일관성을 받지 못하는 상태

두 조건 충족 시 발생
- 공유 자원 사용
- 동시성

크리티컬 섹션
- 두개 이상의 프로세스나 스레드가 동시 접근하면 안되는 공유자원을 사용하는 코드 영역
- 공유자원 데이터 일관성을 보장받기 위해 한 번에 하나의 프로세스 또는 스레드만 크리티컬 섹션을 실행할 수 있도록 제어해야 함.

여러 프로세스가 크리티컬 섹션 접근 시 경쟁상태 발생
상호 배제, 진행조건, 유한 대기

데드락이랑 비슷하잖아?


세마포어
공유자원 접근 동기화위해 사용
P연산, V연산

Busy-Wait, Block/Wakeup

컨텍스트 스위칭
컨텍스트란?
프로세스나 스레드가 실행을 이어가려면 알아야할 현재 상태 스냅샷
- 프로그램 카운터
- 스택 포인터
- 메모리 관리정보
- PCB나 TCB에 저장하여 보관
필요한 이유
- cpu를 여러 실행 단위가 공유
- 어떤 실행단위가 입출력 대기로 쉬는 동안 다른 작업이 cpu 사용해야 시스템 처리량 상승
- 선점 스케줄링으로 인한 응답성 확보 위해서도 필요
언제 발생?
- 인터럽트 발생
- 시스템 콜 호출
동작 방식?


스레드 및 프로세스 중 우선순위?
IO가 먼저임 그렇다면 왜?
즉각적인 반응이 우선이기 때문에?
대기시간동안 cpu가 놀아야하기 때문에 빨리 주는거임

그 와중에도 꾸겨넣는 애들이 인터럽트
빨리빨리 해야하는 애들은 뭐가 있을까?
시스템 오류 같은 거


IO 완료 시 대기큐에 완료 상태로 들어간다.
준비큐, 대기큐 나뉨
준비큐 : CPU 준비
대기큐 : IO 완료
자기 차례 되면 cpu 들어가고... 반복
그래서 컨텍스트 스위칭 후 대기하는 건 준비큐에 들어간다?

제일 많이 쓰는 건 다단계 피드백 큐
각 큐마다 우선순위가 정해져 있어서 필요한 것들부터
우선순위 높은 큐만 들어가지면
기아상태 들어갈 수 있음
에이징 시켜서 숫자 한번씩 올려준다.





suspended? 디스크로 쫓아내기?
일정 영역을 커널 영역으로 가지며 코드로 실행이된다.
각종 앱은 프로세스로서 더블클릭. 이때 프로세스화되서 메모리에 적재됨.
메모리안에서 동작하게 된다.
디스크로 쫓아내는 건 스와핑이라고 함.
앱자체가 거대하거나, 메모리가 가득찼거나. 이때 디스크에 갖다 넣어줌
가상 메모리 같은 것


어떤 프로세스를 메모리에 우선적으로 적재해야 하는가?

실행에 필요한 코어, 커널?
캐시 히트 높은 곳


메모리 할당 중요하다.
페이징 내용도 있음. 정처기에서 나왔던 것... 페이지 fault 딥다이브 함 해봐야 할듯? 복잡하다고 함.



