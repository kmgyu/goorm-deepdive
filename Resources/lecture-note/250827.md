현업에서는 ERD 만질 일이 별로 없다.
기존 erd 리팩토링할 때 아니면 안함.

N:M 해소를 위한 중간 테이블
**개념:** 다대다(N:M) 관계는 관계형 데이터베이스에서 직접 표현할 수 없으므로, 중간 테이블을 통해 두 개의 일대다(1:N) 관계로 분해합니다. 발주와 품목의 관계가 대표적인 예입니다.

**다대다 관계 해소 예시**

```sql
-- 발주-발주상세-품목 관계 조회
SELECT
    po.order_no AS 발주번호,
    po.order_date AS 발주일자,
    s.name AS 공급업체,
    p.name AS 품목명,
    poi.order_quantity AS 주문수량,
    poi.unit_price AS 단가
FROM purchase_order po
INNER JOIN supplier s ON po.supplier_id = s.supplier_id
INNER JOIN purchase_order_item poi ON po.purchase_order_id = poi.purchase_order_id
INNER JOIN product p ON poi.product_id = p.product_id
WHERE po.status = 'CONFIRMED';
```


IFNULL / COALESCE / NULLIF

**개념:** NULL 값을 적절히 처리하기 위한 함수들입니다. 실무에서는 NULL 값을 그대로 보여주기보다는 의미있는 기본값으로 대체하거나, 여러 값 중에서 NULL이 아닌 첫 번째 값을 선택하는 경우가 많습니다.


COUNT(\*) vs COUNT(col)

**개념:** COUNT 함수는 NULL 값을 어떻게 처리하는지에 따라 결과가 다릅니다. 이 차이를 모르면 실무에서 잘못된 집계를 하게 됩니다.

- `COUNT(*)`: 모든 행의 개수 (NULL 포함)
- `COUNT(컬럼명)`: 해당 컬럼이 NULL이 아닌 행의 개수

---

뷰의 경우 네이밍 시 \_view를 해주는 식으로 만들어줌.
jpa orm 때문에 접두어들이 안들어가게 구성하는 경우가 많다.

뷰인지 테이블인지 명확하게 해주는 게 있다.

stock db, sales db가 다 따로 있는 상황
이때 확인정도는 해야 할 때 뷰에 대한 read 권한만 주는 경우도 있다.
레거시 시스템은 아직도 그렇게 되어있는 경우가 많을 것이라고 함..

msa는 다르게 구성되어 있을 수 있다.
msa마다 db가 따로 되어있는데 api를 통한 통신을 하게 되는데, 아키텍처에 변화가 있을 수 있음.

비정규화
join 줄여서 쿼리 최적화하려고 하는 게 아님


---

예전에 코드 테이블 안썼을 때는 Case when(if else 같은 분기문)을 많이 썼었음.

DATE_SUB
LPAD, COALESCE, cast 뭐하는 함수인지 알아볼 것


윈도우 함수
행과 행 간의 관계를 쉽게 정의하기 위해 만든 함수
행과 행 간을 비교, 연산, 정의하기 위한 함수
rank, sum over 등...

배치 프로세스?
크론탭 활용
스프링 배치 활용

원하는 회사의 프로세스를 알아보는 것도 나쁘지는 않다고 하는데 배치 프로세스를요?? 냉???


윈도우 함수는 다양하게 쓸 일이 많지는 않다.

cte 사용?

순위 함수
이전 부분은 강의 자료 참고
row_number, rank, dense_rank

집계 함수
sum() over - 누적합
avg() over - 이동 평균
count over - 누적 개수
percent rank - 퍼센트 순위?

누적 분포 등... 다양하게 있다.

값 접근 함수
lag, lead

등등 많은 함수가 존재함!!!

