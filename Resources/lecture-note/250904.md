플래시 메시지
잠깐 나타났다 사라진다고 해서 플래시
사용자가 페이지 새로고침하면 사라짐
플라스크 flash()도 이거랑 똑같다.

PRG - 목록 페이지에서 작성완료 메시지 표시

RedirectAttributes vs Model

일반 Model은 리디렉션 시 값을 전달해주지 못함.
리디렉션 시에도 데이터를 전해주려면 redirectAttributes를 사용해야 한다.
그중 플래시 메시지는 addFlashAttribute 사용하면됨

i18n = 다국어라는 뜻

주요 기술
- `th:if="${message}"` - Flash 메시지 있을 때만 표시
- `th:text="#{${message}}"` - 메시지 키를 i18n으로 변환

${}만 사용 시, `flash.post.created` 문자열 그대로 표시
`#{}`만 사용 시, message라는 키를 i18n에서 찾지만 i18n에는 메시지가 없고, 찾아야 하는 대상인 flash.post.created를 매핑을 못함.
메시지 못찾고 오류 표시함.


동작 순서

```
1. Controller: redirectAttributes.addFlashAttribute("message", "flash.post.created")
   ↓
2. Spring 내부: Flash 메시지를 세션에 임시 저장
   ↓
3. 리다이렉트: 302 → GET /posts 
   ↓
4. Spring 내부: 세션에서 Flash 메시지를 꺼내서 자동으로 Model에 추가
   ↓
5. Template: ${message} → "flash.post.created"
   ↓
6. Template: #{flash.post.created} → i18n 파일에서 검색
   ↓
7. 최종 출력: "게시글이 성공적으로 작성되었습니다."
```



리디렉트 vs 포워드


Redirect (리다이렉트)

```java
return "redirect:/posts";  // 새로운 HTTP 요청
```

**특징:**

- **2번의 HTTP 요청** (POST → 302 응답 → GET)
- **URL이 변경됨** (브라우저 주소창이 바뀜)
- **새로운 요청**이므로 기존 request 데이터 소실
- **Flash 메시지 필요**: RedirectAttributes 사용

Forward (포워드)

```java
return "post/list";  // 같은 HTTP 요청 내에서 처리
```

**특징:**

- **1번의 HTTP 요청** (서버 내부에서만 이동)
- **URL 변경 없음** (브라우저 주소창 그대로)
- **같은 요청**이므로 Model 데이터 유지
- **일반 Model 사용 가능**


사용 상황

| 상황          | 방법       | 이유                    |
| ----------- | -------- | --------------------- |
| **폼 처리 성공** | Redirect | PRG 패턴, 새로고침 중복 제출 방지 |
| **검증 실패**   | Forward  | 입력 데이터 유지, URL 변경 불필요 |
| **조회 화면**   | Forward  | 단순 데이터 표시             |

Flash 메시지와의 연관성

- **Redirect 시**: 데이터가 소실되므로 **RedirectAttributes** 필요
- **Forward 시**: 데이터가 유지되므로 **Model**만으로 충분

---

에러 뿌리기

국제화

@ControllerAdvice는 전역적인 오류를 다 가져온다.
@ExceptionHandler로 Exception.class 등록만 해줘도 최상위라 모든 억셉션을 다 들고온다.
특정 억셉션만 만들어줄거면 PostNotFoundException같은거 가져오면 된다
억셉션마다 다 다른걸 던지게 해줄 수 있다?
에러메시지 같은 거...

사실 IllegerException같은 것을 해줄 수 있는데, 각 억셉션이 의미가 다를 수 있으니 개별로 만들어주는 것이라고 함.
Service에서 그냥 바로 붙이면 메시지도 직접 서비스레이어에 만들어줘야 한다.
AOP 관점에서 오류 관리를 분리해준 것이라고 볼 수 있음.
