MyBatis 프로젝트

PostMapper?
mapper.maria.PostMapper.xml로 해당 인터페이스 기능을 정의
xml을 통해 각 메서드 실행 시 실행되는 쿼리를 정의

mybatis를 이용해 경로 매핑을 해준다.

mapper의 경우 maria, mysql 등으로 분리할 수 있음.

XML만 DB에 맞게 구성해주면 된다.


프로필 분리하기

예시
h2, maria 각각 만들어주면 됨
그냥 한 쌍을 더 만드는거다.

MVCC 환경에서는 어떻게 함?
암튼 mapper-locations도 mapper/h2로 갈아끼면 된다!
전자정부 스타일도... 이랬다고 함.

-dev, -prod 세팅으로 추가해줄 수도 있음.

logging도 다르게 설정할 수 있다.

공통적으로 사용할 것들은 메인에 구성하고 다른 경우만 따로 구성

yml에서 프로필 어떻게 분리하는지는 안알려주심
알아서 하면 될 듯

개별 프로필 실행하기 설정?
spring.profiles.active
include로 가져올 수도 있다.

yml을 매번 테스트할 때마다 바꿀 필요 없다.
run configuration에서 프로필을 바꿔줄 수도 있음.

${SPRING_PROFILES_ACTIVE:dev}
이것처럼 하면 환경변수 우선, 없으면 dev 이런식이라고 함.

또는 조건부 빈 생성으로 데이터 소스를 생성해줄 수 있다.
@Profile("dev") 이런 식으로 정해줄 수도 있음.

운영환경 보안 설정

일반적으로 설정 파일과 환경변수로 분리

운영 설정 파일을 분리하는 방식
쿠버네티스 configmap, 도커 볼륨 마운트 등...
세팅을 미리 정해둔 다음에 들어간다?

환경변수만으로 모든 설정을 해줄 수도 있음.

