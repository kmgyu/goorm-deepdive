Swagger
사용법

---

JWT
이론

토큰? 티켓을 발급한다.
이런 발급 이력같은 것도 서버상에는 안남음
Valid를 검증하는 게 주된 과제
이중 토큰, 화이트리스트, 블랙리스트 패턴 등이 존재함.

헤더, 페이로드(실제 전달 정보), 시그니처 등으로 이루어져 있다.

유효 시간은 Trede off
너무 짧으면 보안은 이득
계속 로그인 하면 불편하므로 refresh Token이라는 것을 제공

유효시간이 매우 긴 경우?
화이트 리스트, 블랙 리스트 패턴
화이트 리스트는 발급한 정보를 저장해놓는다.

블랙 리스트는 로그아웃 시 해당 토큰을 저장해놓고 인증되지 않은 것으로 간주하는 방식으로 작동한다.


세션과의 차이?

세션은 사용자 의지와 상관없이 사용자의 세션을 날려서 사출가능.
JWT에서도 사용자 강제 로그아웃 같은 것을 제어하려면 화이트 리스트, 블랙 리스트 패턴을 사용함.


Exception은 서비스에서 발생하고 GlobalExceptionHandler가 잡아줌
필터는 컨트롤러에 도달하지 못한다.
따라서 GlobalExceptionHandler와는 다르다. 패키지에는 넣어놨으나 전혀 다른 개념? 그럼 안넣으면 되는 거 아님니까...?


아무튼 그래서 인증/인가 시에는 AccessDeniedHandler가 꼭 필요함.
인증 실패 또는 권한 없음의 개념이기 때문에...


토큰은 구현하면 할 수록 인프라에 가까워져서 주니어가 직접 할 일은 거의 없다.
기본적으로 trade off 관계라서 개선하려고 하면 끝이 없다.

OncePerRequestFilter를 사용하는 이유?
✅ Spring Bean 자동 주입 가능
✅ HttpServletRequest/Response 타입으로 직접 제공 (캐스팅 불필요)
✅ 한 요청당 한 번만 실행 보장
✅ shouldNotFilter() 메서드로 특정 경로 제외 가능

이런 일들이 있다고 함...

jwt에서는 csrf 보호가 불필요

스프링 필터체인 실행 순서?


---
Spring Security


로그인 실패 후 돌아가는 것에 대한 세팅?