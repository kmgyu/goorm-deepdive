N:M 안씀
- 연관관계 테이블 제어 못함.
- 중간 관계 이어주는 엔티티 추가 같은 게 안되고 사용도 복잡함.
- 1:N, N:1 로 분리해서 사용한다.
1:N 쓸수 있으나 쓸 이유 없다.


1:1, N:1 많이 씀

1:1
Fetch 기본 값은 EAGER
실무에서는 LAZY 권장

select의 추세는 record 사용


CascadeType : 영속성 상태 변화 전파 방식

단방향?
양방향 구조가 필요한 이유?
한 번의 쿼리로 모든 데이터 조회. 프론트에서 추가 호출 없이 사용할 수 있다.
조회에서만 양방향 사용함.
같이 보기가 목적이라 api는 비효율적?

Orphan removal

master-detail 구조에서 detail 삭제를 위한 것
고아 객체 삭제?

cascade remove vs orphan removal

부모는 안날라가고 자식만 날라간다
부모도 날아가려면 별도 세팅 필요

그래서 왜 고아라고 하냐?
연관관계 끊긴 객체라서.
부모 객체를 삭제하거나 연관관계를 끊을 때 자식을 삭제하는 것임.
orphan removal을 하게되면 관계가 끊어지고 영속성에서 제거된다.
연결도 끊기고 영속성에서도 제거되니 GC의 대상이 된다.

완전히 종속적인 관계(식별관계 수준의 의존성 말하는 듯?)나, 부모가 자식의 생명주기를 관리할 때 사용함.

one to many에서 가끔씩 나오고 one2one, many2many 등에서는 거의 사용 안한다고 함.

독립적인 엔티티나 직접 delete()를 사용해 명확하게 해주어야 하는 경우는 사용하지 않는다.

