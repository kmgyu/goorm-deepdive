보호자 측에서 경로를 가져온다.
근데 사용자 거에서 시작점 끝점만 가져옴.
경로 가져오는 건 또 만들어줘야 한다.

캐싱을 시켜줘서 조회할 수 있게 만들어보기?


기능 설계만 좀 만져두면 될 듯.



발표 때 이렇게 기획했어요 라고 할 만한 방안들?

내가 한거
1. 길찾기
	1. API (KAKAO, TMAP)
2. 충전소 클러스터링
3. 사용자 경로 Get 해오기 (엄청 많은 json 우다다)
4. 프론트?

정리하기

# 길찾기

KAKAO API, TMAP API 두 개를 사용하여 길을 찾는다.
각각 타임아웃 걸려서 API 장애 걸릴 시 실패 기능도 넣었다.

길찾기 할 때 계단 회피 기능을 통해 전동보장구가 가기 쉬운 경로를 만들어준다.

만약 API를 사용할 수 없거나 거리가 너무 먼 경우 등 다양한 이유로 실패 시 대안으로 url scheme을 제공한다.
이것을 통해 대안에서도 사용하기 좋다.

API 받아와서 프론트에서 가공할 수 있는 형태로 변환해준다.

# 충전소 클러스터링

충전소 마커 올리는 데 개수 때문에 JS가 처리를 전부 못함.
이전부터 있었던 이슈인데 우리가 해결해보고자 함.

현재 구현된 것은 프론트엔드에서 카카오맵의 기능을 사용하는 것임

더 이상적인 것은 백엔드 측에서 미리 클러스터링 후 보내는 것임.
시도, 시군구 단위로 클러스터링 해서 특정 크기 이상으로 축소시키면 클러스터링 된 것 보여주도록


근데 이거 생각하다가 기능 구현 어떻게 할 지 혼란스러워졌음.
묶은 그룹을 집계 함수로 DB에 저장.
집계된 그룹들을 마커 형태로 보여주기?
그럼 확대/축소 시 마커는 어떻게 바뀜?
클릭시에는 리스트 보여줌?

생각할 게 너무 많았다.

# 사용자 경로 가져오기

### 현재 구현

알림 측에서 경로 생성 API 사용함.
멱등성 때문에 이상이 없긴 하지만 캐싱 사용하는 것이 좋을지도?
Streams에 올리는 건 아닌 것 같음... 실시간으로 변하지도 않는데 왜 해야하는지에 대한 의문점1.
그럼에도 불구하고 성능을 개선시킬 수도 있다...?
레디스로 캐싱해서 사용자에게 지속적으로 알려주기

어느 것이 빠를 까요 알아맞춰 보세요~
메모리 희생 vs 시간 비용

보호자가 많지 않다면 레디스 사용하는 것이 더 힘들 듯
보호자들이 요청이 많으면 캐싱이 맞다.
근데 우린 예상 사용자 계산을 한 적이 없다. 우린 망했어.

# 프론트

열심히 깎았음.
할 게 없다.


# 테스트코드 해봐야 한다!
작성한 게 있던가?
Mockito가 써보고 싶어욤.

# 발표자료 준비

## 담당업무 작성

## 트러블 슈팅

TMAP API 서비스 제공 구역에 대한 고민

준원님 - 공공데이터 갱신에 대한 고민

오류 발생 시 대안을 넣는다. 대안 생성에 대한 고민?


## 기술적 개발 방향 = 고도화?



캐싱 고도화 필요함.

이벤트 리스너 측에서 이거 넣어줘야 함.
```
redisTemplate.opsForGeo()
    .add("chargers:geo", // 여긴 키
         new Point(lng, lat),
         chargerId.toString()); // 여긴 데이터 내용
```
아니면... 리스트 단건으로 넣을 때마다 직접 넣어줘야 하는데 내가 하리?
가 발생할 수 있음.
아님 말고. 책임 권한은 잘 모르겠다.

이렇게 등록하고 나서 데이터 처리하는 부분도 TTL 날린다.
lng, lat 검색... 전략 어느정도 많이 뜯어 고쳐야 한다.


---

3차는 특강 강사님 한 분 들어오시며 시간은 안정해졌다고 함.

프론트, 백 깃은 분리하는 것이 좋을 것 같다고 하심.