- 보호자 위치 알림 기능 요구사항
- timeout
- http response 프론트엔드에 변경점 적용


사용자 측을 publishing
그럼 민성님쪽에서 쭉 뿌려주기?

Redis쪽은 민성님이 만져주면 좋을 듯

나는 내부메서드로 데이터를 가져오는 정도만 구현해도 될 것 같음?


사용자 실시간 위치도 레디스에 그냥 저장하는게 좋지 않을까? 라는 생각.

userIdProtector
컬럼으로 구분

user와 protector 받아와서 엔티티 구성되어있고 DB로 하면 어려울 듯?

SSE의 우선도 격상


사용자 위치를 콜 하는 것...

publishing 으로 밀어넣기만 구현
민성님이 subscribing으로 가져오기

config는 

Publisher까지는 내가 세팅
Subscriber는 내가? 할지? 민성님이 할지? 몰루. 하지만 내거 세팅 보고 하신다.

# Redis pub/sub 구현

참고
https://lucas-owner.tistory.com/68

끼야야야야

DTO 스펙 확정?

Redis Pub 사용

topic UUID로 발행
그럼 사용자 UUID로 구독?
relations table를 만들어놨는데, relation ID 연관관계가 있다.
보호자 입장에서는 연관관계 ID로 조회하는 것이 맞을 것 같음.

보호자가 N명의 사용자를 관리하는 상황도 처리 가능

연관관계는 BigInt.

UUID 가져오는 서비스

제약사항 : 사용자 - 보호자 1:1 매핑으로 고정!



# todo+

속도 6km로 요청시키는 api 패러미터 추가 (dto)

타임아웃 기능을 추가했다.
https://devtalk.kakao.com/t/api-connection-readtime/137515
레퍼런스의 두배로 정해줬다.
로그인보다 무거운 기능들이니 넉넉하게 두배!

프론트 API 지도 상 위치

Bulk head 패턴을 이용해 API 요청 제한
(API 요청으로 기다려서 스레드 전부 가용, 마비. 이로 인해 서버가 터질 것을 API 쓰는 최대 스레드를 제한하여 기능 하나만 터지도록 제한하는 기능.)

하는 김에 FE의 타임아웃을 30초로 정했다.
10초 10초 하고 백엔드 10초로 해줬다. 기능 얼마나 커질지 모르니 넉넉하게...
