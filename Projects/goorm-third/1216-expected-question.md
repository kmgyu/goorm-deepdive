# 예상 질문

트러블 슈팅...
문제 원인을 밝혀냈는지에 대한 내용이 없다.
어떻게 해결했는지?
크 / 아 / 아 / 악

## 길찾기 기능

사용자 맞춤형 경로?
전동보장구는 계단 이용에 제한이 있음.
이런 계단들을 회피할 수 있도록 경로를 생성해준다.

기준은?
외부 API를 이용하기 때문에 그것을 알 수는 없음.

검증은?
정말 계단을 회피하는 지에 대한 검증은 하지 않음.
경로 생성 시 정말 비용이 높아진다.
제공 구역이 제한되어 있어 이에 대한 검증을 하기는 한다.

예상 시간은 어떻게 계산함?
전동보장구 운행 시 최고속도가 6km/h라는 법령이 존재함
해당 기준을 따랐다.

실패한 메시지가 보이는데 멀다는 기준은?
API 사용 시 약 3km부터 제공하지 않도록 되어 있다.
현재는 단순 위경도로 구분하고 있으나 하버사인 공식을 이용해 근사값의 거리 계산이 가능하다.

제공 구역은 따로 존재함?
API가 제공하는 구역이 존재함. 그것을 기준으로 하였음.
이를 위해 좌표를 주소로 변환하는 API를 끌어왔다.

## 팀 소개
좌표 기반 캐싱이 무슨 의미?
Redis에는 Geospatial이라는 기능이 존재한다. 레디스는 해싱 기반 인덱스 구조이기 때문에 쿼리를 통해 위경도로 범위 검색하는 것이 제한적일 수 있는데, 이를 검색할 수 있도록 해준다.

길찾기는 API 사용하는데, 그럼 너가 하는 건 뭐임?
API 연동 작업이랑 길찾기는 책임 범위가 다르다고 생각해서 분리함...
근데 막상 사용하려 보니까 나밖에 안쓰는거임...
단순히 길찾기 외에도 위경도 좌표 기반 주소 변환도 쓰이고 카카오 URL 스킴이라던지 다양한 거 사용함...

---
# GPT가 만든 활자 조합물
## 1. 프로젝트 전반 / 기획·도메인 질문

1. 이 서비스의 핵심 문제 정의는 무엇인가?
전동보장구 길찾기 불편함 해소
충전소 검색 시 안나옴. 어플 사용해야 함. 그 어플도 사용하기 어려움.

2. 기존 지도 서비스(카카오/네이버)와의 차별점은 무엇인가?
타겟층이 명확하게 정해져 있음.
충전소나 장애인이 사용 가능한 공공화장실 길찾기 기능 제공(계단 회피)

3. MVP 범위는 어디까지로 설정했는가? 제외한 기능은 무엇인가?
기준점 없음.
최대한 기초 기능?

4. 서비스 제공 지역 제한 문제를 어떻게 정의했는가?
제3자 API 문서에 명시된 제공 구역 기준

5. 공공 데이터 신뢰도 문제를 어떻게 해결하려 했는가?
6개월 주기로 데이터가 갱신됨.
수동으로 갱신. 확장 시 자동 갱신 가능.

6. 실패했을 때(경로 미제공 등) 사용자 경험은 어떻게 설계했는가?
오류 메시지를 출력해서 원인을 알 수 있도록 함. 납득할 수 있도록

---

## 2. 위치·지도·경로 설계 관련 질문

1. 사용자 위치는 어떤 방식으로 수집하는가?
Web API의 navigator api를 이용해 사용자 위도 경도 좌표를 수집함.

2. 실시간 위치 추적과 단발성 위치 조회의 차이를 어떻게 구분했는가?
비용
길찾기 API는 매번 갱신해야한다. 비용 개 많이 듬. 따라서 경로만 보여주고 위치만 추적하는 방식

3. 위치 정보 수집 주기와 성능 부담은 어떻게 고려했는가?
생각 안 함. 이제부터 해야 됨.

4. GPS 오차는 어떻게 처리하는가?
처리 못함. 모바일 필수임.

5. 경로 탐색 API(Tmap/Kakao)를 선택한 기준은 무엇인가?
계단 회피 API가 Tmap 밖에 없음. 길찾기를 잘 제공해주는 API가 Tmap 말고 없다.
 
6. API 결과가 불안정할 때 fallback 전략은 무엇인가?
카카오맵 URL 스킴을 넣어 대체 경로를 생성함.

7. 제공 구역이 아닌데 경로가 나오는 경우는 어떻게 처리하는가?
제공 구역 검증해서 구역이 아니면 못 하도록 만듬.

8. 계단/경사로 회피 조건은 어떻게 정의했는가?
그건 우리가 하는 일이 아님.

9. GeoJSON 구조를 선택한 이유는 무엇인가?
지도니까... 그럼 뭐 XML이라도 쓰라는 거임?

10. 프론트에서 LineString과 Point를 분리한 이유는 무엇인가?
길안내 서비스로 확장을 염두하고 있기 때문이다.
Point에서 좌회전, 우회전, 횡단보도 건너기와 같은 중요한 안내가 행해진다. 따라서 초기부터 이런 정보를 같이 담아주도록 했다.

---

## 3. 백엔드 아키텍처 / Spring 설계 질문

1. 전체 패키지 구조는 어떤 기준으로 나누었는가?
DDD

2. Controller–Service–Client 책임 분리는 어떻게 했는가?
RestClient에서 데이터만 받아옴
컨트롤러 입력 검증
서비스 데이터 검증

3. 외부 API Client를 별도 클래스로 분리한 이유는?
책임 분리 원칙 때문
API와 연결하고 데이터를 받아오는 곳을 아예 분리해야했다.
DTO를 받으면 가공해서 사용하기 편한 형태로 바꿔야 하는데, 이를 Mapper 패턴으로 사용했기 때문. 서비스에서 이런 변환까지 담당하게 될 시 책임이 많아진다고 판단단

4. 외부 API 실패 시 Exception을 throw하는 방식이 적절한가?
실패 시 BusinessException을 던지도록 설계함.
타임아웃과 같은 RestClient에서 던지는 건 서비스 레이어에서 직접 받음

5. 비즈니스 예외와 시스템 예외는 어떻게 구분했는가?
비즈니스 예외는 도메인에서 발생하는 것을 기준으로 함.

6. DTO와 Entity를 분리한 기준은 무엇인가?
    
7. Mapper를 static utility로 둔 이유는?
빠르게 사용하기 위함
AOP를 이용하지 않기 때문에 오히려 관리하기 쉽다고 판단함.

8. Validation은 어느 레이어에서 처리하는가?
컨트롤러

9. 트랜잭션 경계는 어디까지인가?
내 도메인은 그런 거 없따

10. 향후 확장 시 가장 먼저 리팩토링할 부분은?
Object Mapper 직렬화 문제 해결.
어노테이션 지우고 전역 빈인거 다시 private 전환
그다음은 기능확장장
길 안내 서비스 프론트 개선이 가장 시급할 듯

---

## 4. Redis / 캐싱 / 성능 질문

1. Redis를 도입한 이유는 무엇인가?
DB보다 빠름.
DB에서도 캐싱을 하긴 하지만 쿼리 옵티마이저 안 거침. DB 풀 소모 X

2. 캐싱 대상 데이터는 무엇이며 기준은 무엇인가?
충전소.
DB에서 뽑아오기 힘듬

3. 단건 캐싱과 리스트 캐싱 중 어떤 방식을 사용했는가?
충전소에 대해.
단건. 리스트는 구조적으로 불가능함.

4. RedisTemplate과 ObjectMapper 직렬화 문제는 왜 발생했는가?
ObjectMapper의 경우 전역 설정하면서 문제가 발생함.
RedisTemplate의 경우 직렬화 대상이 모호함에 의해 발생함.

5. LinkedHashMap 캐스팅 에러의 근본 원인은 무엇인가?
아니 설명 되있음 발표에!!!

6. TTL은 어떻게 설정했는가?
주기성 데이터. 6개월이라 무제한으로 설정함.
현재는 수동으로 갱신하도록 설정되있는데, 자동화된다면 캐시도 전부 지우고 다시 올리도록 바꿀 듯.

7. 캐시 무효화 전략은 존재하는가?
주기성 데이터에 거의 바뀌지 않아서 전략 생각해본 적 없는뎅...

8. 캐시 일관성 문제를 어떻게 인식하고 있는가?
생각 안해봄.

9. Redis가 죽으면 시스템은 어떻게 동작하는가?
DB가 연결됨.

10. Caffeine 대신 Redis를 쓴 이유는?
서버 내부에서 사용하는 캐시 < 레디스
결국 JVM에 의해 관리되니 부하가 심해질 것이라 판단함.

---

## 5. Docker / 배포 / 인프라 질문

1. docker-compose를 사용하는 이유는 무엇인가?
개발 환경 통일
테스트 용이

2. dev / prod 환경을 어떻게 분리했는가?
yml 프로필 분리

3. nginx를 두는 이유는 무엇인가?
리버스 프록시

4. 컨테이너 간 네트워크는 어떻게 구성되어 있는가?
도커 네트워크로 구성함.

5. 로그 확인은 어떤 방식으로 하고 있는가?
로그 확인 콘솔로만 가능함

6. 운영 환경에서 가장 불안한 요소는 무엇인가?
SPOF

---

## 6. 데이터베이스 / ERD 질문

1. 사용자–보호자 관계를 왜 정규화했는가?
반-정규화임

2. N+1 문제 가능성은 어떻게 판단했는가?
???

3. PK 전략은 무엇인가?
난 DB가 없어...

4. 인덱스는 어떤 기준으로 설정했는가?
    
5. 대용량 로그 데이터가 쌓이면 어떻게 할 것인가?
    
6. 삭제 전략(soft delete 등)은 고려했는가?
    
7. 트랜잭션 충돌 가능성은?
    
8. Batch 테이블이 자동 생성되지 않은 이유는?
    

---

## 7. 프론트엔드 / UX 질문

클러스터링은 카카오 api를 끌어다 씀

실시간 렌더링하면서 하드웨어에 따라 느려지는 이슈 확인

접근성은 미고려됨. tts 같은 것으로 시각 장애인을 고려할 수 있을 듯.

---

## 8. 협업 / 의사결정 / 개인 기여도 질문

1. 팀 내에서 본인의 역할은 무엇이었는가?
길찾기랑 API랑 지도랑
할 거 없어서 지도 캐싱이랑 프로필 분리랑

2. 가장 어려웠던 기술적 의사결정은?
오픈데이터 충전소 업데이트 기준 문제

3. 의견 충돌이 있었던 사례는?
업데이트 기준 문제
수정하냐 삭제하고 전부 다시 올리냐.
의견 충돌이라기 보다 아무도 해결할 방법을 찾지 못한 것에 가까웠음.
가장 합리적인 것으로 전부 날리고 재입력

4. 일정이 촉박했을 때 우선순위는 어떻게 정했는가?
    
5. 본인이 설계한 부분은 어디까지인가?
단계? 초기 기획에서 기능 정하고 특정 기능 맡는다.
해당 기능에 대한 ERD 설계와 로직 설계

6. 아쉬운 점은 무엇인가?
문제 발생 시 문제상황을 문서화하지 못한 점.

7. 다시 한다면 구조를 어떻게 바꾸겠는가?
시간 충분하면 MSA

8. 이 프로젝트에서 가장 성장했다고 느낀 부분은?
API 연동 시 발생하는 문제 상황 생각해보기


## 1. ObjectMapper 직렬화 이슈 관련 예상 질문

### 1-1. 원인 검증형 질문

1. RedisConfig에 있던 ObjectMapper를 왜 public Bean으로 변경했는가?
제가 안했는데 모름;;
2. private → public Bean 변경이 전역 설정에 영향을 준다는 것을 왜 즉시 인지하지 못했는가?
    
3. Spring에서 ObjectMapper Bean이 여러 개 존재할 경우 우선순위는 어떻게 결정되는가?
@Qualifier 또는 @Primary

4. Jackson의 기본 직렬화 기준은 무엇인가?
    
5. 직렬화 기준이 “모호해졌다”고 표현했는데, 구체적으로 어떤 상태를 의미하는가?

6. JsonCreator.Mode.DEFAULT와 이 이슈는 어떤 관련이 있는가?
    
7. record 타입에서는 문제가 발생하지 않은 이유는 무엇인가?
    
8. DB(Entity) 쪽에서는 영향이 미미하다고 판단한 근거는?
    
9. 컨트롤러 응답 DTO에는 왜 문제가 발생하지 않았는가?
    
10. 이 이슈가 테스트 단계에서 발견되지 않은 이유는 무엇인가?
    

---

### 1-2. 해결책 검증형 질문

1. 왜 @JsonProperty를 해결책으로 선택했는가?
    
2. 필드 접근 제어자(package-private → private) 변경이 왜 영향을 미쳤는가?
    
3. @JsonProperty와 @JsonAlias의 차이는 무엇인가?
    
4. ObjectMapper 설정을 다시 분리하는 방법은 고려하지 않았는가?
    
5. Redis 전용 ObjectMapper를 따로 두는 방식은 왜 선택하지 않았는가?
    
6. 이 방식은 확장성 측면에서 안전한가?
    
7. 필드명이 바뀔 경우 유지보수 비용은 어떻게 되는가?
    
8. Jackson Mix-in을 사용하지 않은 이유는?
    
9. DTO 계층에서만 명시적으로 처리하는 방법은 고려했는가?
    
10. 이 방식이 “임시방편”이 아니라는 근거는 무엇인가?
    

---

### 1-3. 반박·심화 질문

1. 이 문제는 ObjectMapper가 아니라 RedisSerializer 설계 문제 아닌가?
    
2. 전역 ObjectMapper를 건드리는 구조 자체가 위험하지 않은가?
    
3. 팀 프로젝트에서 이런 변경이 들어오면 어떻게 공유·통제할 것인가?
    
4. 같은 문제가 다시 발생하지 않는다는 보장은 있는가?
    
5. 이 이슈를 한 문장으로 요약한다면?
    

---

## 2. Redis Geospatial 직렬화 이슈 관련 예상 질문

### 2-1. 원인 검증형 질문

1. Redis에서 데이터를 Map으로 인식하게 된 정확한 경로는?
    
2. Redis에 저장된 실제 데이터 구조는 어떻게 생겼는가?
    
3. LinkedHashMap 캐스팅 에러가 발생한 이유는 무엇인가?
    
4. Jackson Default Typing이 비활성화된 상태였는가?
    
5. 클래스 정보(@class)가 포함되지 않은 직렬화의 특징은?
    
6. RedisTemplate에서 valueSerializer는 무엇을 사용하고 있었는가?
    
7. 이 문제는 Redis Geospatial 때문인가, Jackson 때문인가?
    
8. 다른 도메인 객체에서도 동일한 문제가 발생할 가능성은?
    
9. 캐시 데이터를 직접 조회해본 적이 있는가?
    
10. Redis CLI에서 확인한 데이터 형태는?
    

---

### 2-2. 해결책 검증형 질문

1. 왜 전용 Serializer를 만드는 방식을 선택했는가?
    
2. GenericJackson2JsonRedisSerializer를 사용하지 않은 이유는?
    
3. 타입 정보를 포함하는 직렬화 방식은 왜 배제했는가?
    
4. 특정 클래스 전용 Serializer의 단점은 무엇인가?
    
5. 해당 객체가 변경될 경우 Serializer는 어떻게 대응하는가?
    
6. 이 Serializer는 어디까지 적용되는가?
    
7. 테스트는 어떻게 검증했는가?
    
8. Redis 캐시 초기화 시 문제는 없었는가?
    
9. 캐시 버전 관리 전략은 있는가?
    
10. 이 구조는 다형성 객체에도 안전한가?
    

---

### 2-3. 반박·심화 질문

1. 이건 Redis를 RDB처럼 쓰는 안티패턴 아닌가?
간단한 검색 기능이라 문제 없다고 판단함.

2. 캐시에 객체를 그대로 넣는 방식의 리스크는?
객체 변동 시 관리를 어떻게 할 것이냐에 대한 문제

3. JSON 대신 다른 직렬화 포맷은 고려했는가?
XML이 있는데 JSON이 더 좋을 것 같았음.

4. 캐시 장애 시 서비스 영향은?
모르겠음. 생각 안해봄.

5. 동일 데이터를 DB와 Redis에서 이중 관리하는 이유는?
    

---

## 3. 충전소 검색 기능 개선 / 성능 관련 예상 질문

### 3-1. 프론트엔드 클러스터링 관련 질문

1. 왜 처음에는 모든 충전소를 한 번에 내려보냈는가?
    
2. JS 처리량 한계는 어떤 기준으로 판단했는가?
    
3. 클러스터링을 프론트에서 처리한 이유는?
    
4. 카카오 맵 클러스터링의 내부 동작을 이해하고 있는가?
    
5. 줌 레벨에 따른 마커 수 변화는 어떻게 되는가?
    
6. 여전히 프론트 연산 부하가 있다고 판단한 근거는?
    
7. 모바일 환경에서는 문제가 없었는가?
    
8. Web Worker 사용은 고려하지 않았는가?
    
9. 서버 사이드 클러스터링은 왜 배제했는가?
    
10. 이 방식의 한계는 무엇인가?
    

---

### 3-2. Redis Geospatial 도입 관련 질문

1. DB 대신 Redis Geospatial을 선택한 이유는?
    
2. 기존 DB 인덱스로는 해결이 불가능했는가?
    
3. Redis GEOSEARCH의 시간 복잡도는?
    
4. 캐시 웜업은 언제, 어떻게 수행되는가?
    
5. 서버 재시작 시 웜업 비용은?
    
6. 캐시와 DB 데이터 불일치 가능성은?
    
7. 충전소 데이터 변경이 발생하면 어떻게 동기화하는가?
    
8. 반경 검색 기준은 어떻게 설정했는가?
    
9. 정밀도(GPS 오차)는 고려했는가?
    
10. Redis를 장애 지점(SPOF)으로 만들지는 않았는가?


---

## 4. 종합 판단형 질문 (면접 단골)

1. 이 트러블 슈팅 중 가장 근본적인 실수는 무엇이라고 보는가?
ObjectMapper를 수정해야 했는데 근본 원인을 못 찾고 하나하나 수동적으로 수정한 것이 가장 컸다.
시간 부족으로 인해 시야가 좁아진 것이 원인

2. 지금 다시 설계한다면 어떤 선택을 바꾸겠는가?
    
3. 이 경험이 실무에서 어떤 판단 능력을 길러주었는가?
    
4. 비슷한 이슈가 발생하면 앞으로의 대응 절차는?
    
5. 이 프로젝트에서 “기술보다 중요한 교훈”은 무엇이었는가?

---

