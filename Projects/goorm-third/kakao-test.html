<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Kakao Map - GeoJSON Route Draw</title>
  <style>
    #map {
      width: 100%;
      height: 600px;
    }
  </style>

  <!-- Kakao Map Script -->
  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=APP_KEY&libraries=services,drawing"></script>
</head>
<body>

<h2>GeoJSON 경로 표시 예제</h2>
<div id="map"></div>

<script>
// ---------------- GeoJSON 데이터 ----------------
const geoJsonData = {
    "type": "FeatureCollection",
    "features": [
        {
            "type": "Feature",
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [
                        126.54777425778529,
                        34.89753629522168
                    ],
                    [
                        126.54774924383031,
                        34.898200108844385
                    ],
                    [
                        126.5477297942053,
                        34.898483409910526
                    ],
                    [
                        126.54771312711742,
                        34.89856117864338
                    ]
                ]
            },
            "properties": {
                "index": 1,
                "lineIndex": 0,
                "name": "보행자도로",
                "description": "보행자도로, 114m",
                "distance": 114,
                "time": 94,
                "roadType": 23,
                "categoryRoadType": 0,
                "facilityType": "11",
                "facilityName": ""
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [
                        126.54771312711742,
                        34.89856117864338
                    ],
                    [
                        126.54803254313647,
                        34.89856951631685
                    ],
                    [
                        126.54841584246763,
                        34.898575077581775
                    ],
                    [
                        126.5486380446511,
                        34.898591746042236
                    ],
                    [
                        126.54892135166736,
                        34.89864452255239
                    ],
                    [
                        126.54904356214459,
                        34.89868340907673
                    ]
                ]
            },
            "properties": {
                "index": 3,
                "lineIndex": 1,
                "name": "",
                "description": ", 119m",
                "distance": 119,
                "time": 95,
                "roadType": 23,
                "categoryRoadType": 0,
                "facilityType": "11",
                "facilityName": ""
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [
                        126.54904356214459,
                        34.89868340907673
                    ],
                    [
                        126.5493379813871,
                        34.89865008436854
                    ],
                    [
                        126.54950741086151,
                        34.89865008716928
                    ],
                    [
                        126.54962684427984,
                        34.89866953139568
                    ]
                ]
            },
            "properties": {
                "index": 5,
                "lineIndex": 2,
                "name": "",
                "description": ", 52m",
                "distance": 52,
                "time": 42,
                "roadType": 22,
                "categoryRoadType": 0,
                "facilityType": "11",
                "facilityName": ""
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [
                        126.54962684427984,
                        34.89866953139568
                    ],
                    [
                        126.54969072995928,
                        34.898569543726666
                    ],
                    [
                        126.5497046186357,
                        34.89852788198746
                    ],
                    [
                        126.5497073985354,
                        34.8984306707729
                    ],
                    [
                        126.54971573214709,
                        34.89838900894186
                    ],
                    [
                        126.54972962055295,
                        34.89835845706099
                    ],
                    [
                        126.54977406235597,
                        34.89830568596849
                    ]
                ]
            },
            "properties": {
                "index": 7,
                "lineIndex": 3,
                "name": "보행자도로",
                "description": "보행자도로, 44m",
                "distance": 44,
                "time": 36,
                "roadType": 22,
                "categoryRoadType": 0,
                "facilityType": "11",
                "facilityName": ""
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    126.54777425778529,
                    34.89753629522168
                ]
            },
            "properties": {
                "totalDistance": 329,
                "totalTime": 267,
                "index": 0,
                "pointIndex": 0,
                "name": "",
                "description": "보행자도로를 따라 114m 이동",
                "direction": "",
                "nearPoiName": "",
                "nearPoiX": "0.0",
                "nearPoiY": "0.0",
                "intersectionName": "",
                "facilityType": "11",
                "facilityName": "",
                "turnType": 200,
                "pointType": "SP"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    126.54771312711742,
                    34.89856117864338
                ]
            },
            "properties": {
                "index": 2,
                "pointIndex": 1,
                "name": "",
                "description": "우회전 후 119m 이동",
                "direction": "",
                "nearPoiName": "",
                "nearPoiX": "0.0",
                "nearPoiY": "0.0",
                "intersectionName": "",
                "facilityType": "11",
                "facilityName": "",
                "turnType": 13,
                "pointType": "GP"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    126.54904356214459,
                    34.89868340907673
                ]
            },
            "properties": {
                "index": 4,
                "pointIndex": 2,
                "name": "",
                "description": "우회전 후 52m 이동",
                "direction": "",
                "nearPoiName": "",
                "nearPoiX": "0.0",
                "nearPoiY": "0.0",
                "intersectionName": "",
                "facilityType": "11",
                "facilityName": "",
                "turnType": 13,
                "pointType": "GP"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    126.54962684427984,
                    34.89866953139568
                ]
            },
            "properties": {
                "index": 6,
                "pointIndex": 3,
                "name": "",
                "description": "우회전 후 보행자도로를 따라 44m 이동",
                "direction": "",
                "nearPoiName": "",
                "nearPoiX": "0.0",
                "nearPoiY": "0.0",
                "intersectionName": "",
                "facilityType": "11",
                "facilityName": "",
                "turnType": 13,
                "pointType": "GP"
            }
        },
        {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                    126.54977406235597,
                    34.89830568596849
                ]
            },
            "properties": {
                "index": 8,
                "pointIndex": 4,
                "name": "%EC%98%A8%ED%8F%89%ED%8F%AC%EA%B5%AC",
                "description": "도착",
                "direction": "",
                "nearPoiName": "%EC%98%A8%ED%8F%89%ED%8F%AC%EA%B5%AC",
                "nearPoiX": "0.0",
                "nearPoiY": "0.0",
                "intersectionName": "%EC%98%A8%ED%8F%89%ED%8F%AC%EA%B5%AC",
                "facilityType": "",
                "facilityName": "",
                "turnType": 201,
                "pointType": "EP"
            }
        }
    ]
};


// ---------------- 지도 초기화 ----------------
const container = document.getElementById("map");
const mapOption = {
    center: new kakao.maps.LatLng(34.8980, 126.5480),
    level: 4
};
const map = new kakao.maps.Map(container, mapOption);

// ---------------- 경로(LineString) 표시 ----------------
geoJsonData.features.forEach(f => {
    if (f.geometry.type === "LineString") {
        const path = f.geometry.coordinates.map(coord => 
            new kakao.maps.LatLng(coord[1], coord[0])
        );

        const polyline = new kakao.maps.Polyline({
            map: map,
            path: path,
            strokeWeight: 5,
            strokeColor: "#3182f6",
            strokeOpacity: 0.9,
            strokeStyle: "solid"
        });
    }
});

// ---------------- 포인트(Point) 표시 ----------------
geoJsonData.features.forEach(f => {
    if (f.geometry.type === "Point") {
        const [x, y] = f.geometry.coordinates;
        const pos = new kakao.maps.LatLng(y, x);

        let color = "#000";
        if (f.properties.pointType === "SP") color = "green";
        if (f.properties.pointType === "EP") color = "red";

        const marker = new kakao.maps.Marker({
            map: map,
            position: pos
        });

        const info = new kakao.maps.InfoWindow({
            content: `<div style="padding:5px;">${f.properties.description}</div>`
        });

        kakao.maps.event.addListener(marker, "click", () => info.open(map, marker));
    }
});

</script>
</body>
</html>
