엔티티 구현 및 세팅
flyway 세팅

와이어 프레임 작성

3시에 피드백 받고 1시간 정도 와이어프레임 작성
피그마로 만들자.
피그마 메이크 그대로 연결해서 프론트로 전환가능. 준원님 그대로 해주셈
피드백용 질문 만들기

---

피드백
경력
교육 도메인 백엔드 3년차 개발자
하나 계열사 QA 3년, 굿닥 5년
다음엔 QA 물어봐야겠당.

> 보호자 사용자 실시간 위치 확인 기능 질문

피드백
일단 정규화가 좀 많이 되어있다. 테이블이 많이 되있어서 정규화 잘 되어있으면 좋긴 하지만 관리가 어렵다. 면접 때 경험했지만, 정규화로 인해 테이블이 너무 많다라고 지적하는 사람들도 존재했었음.
역할 테이블 존재 자체를 사용자와 합치는 반정규화도 좋다고 생각함. MVP 단계이다 보니, 테이블을 이렇게 나누는 것 보다 합치는 것이 나을 듯 함.

guardians relation은 키가 지금 id랑...? 
일단 궁금한 점은 확인함. 
차후 어떤 컬럼이 들어갈 지 결정된 건 아니니 사용자 역할 role 자체를 합치는 거 추천. 테이블 너무 많이 나눠지면 N+1 고려를 많이 해봐야 한다. 
DAO 쓴다면 조인쓰면 되긴 하는데 N+1 안 걸리게 고려하는 게 제일 유의해야 한다. 
사용자랑 role 붙여넣는게 좋을 듯.

> 멀티 룰의 경우 필드를 어떻게 해야 하는지?

일단 룰 하나만 뚫고 JSON 형식으로 넣을 수 있으니 그렇게 넣는 것 고려해보시오.
role은 아마 차후에 더 추가되진 않을거임. 그니까 합쳐보는 거 괜찮아 보인다. guardians 관계는 컬럼이 더 들어갈 것 같기 때문에 일단 둔다.

> relationship에 필드 변경안되면 누가 보호자인지 넣는 것이 관리하기 쉬울 것이라는 말씀이신지?

그래도 이건 보호자 관계 같은 건 중요도가 높음.
제약 조건 걸어주는 것이 좋다고 생각함. DB 자체는 제약조건을 무조건은 아니지만 되도록 많이 거는 것이 좋다. 데이터라는 것이 풀어두면...
nullable한 성격을 가지면 application 레이어에서 NPE 터질수도 있고 default로 String blank 넣는 것... not null 등 성격 고려하는 것도 좋을 것 같음.
DB 짤 때 제약 많이 걸어두고 차후에 풀어두는 것이 좋아보인다.
비정규화 시 함 합쳐볼까 생각도 많이 들기도 한다.

DB 자체에서도 더미데이터를 넣어봐서 실행계획이라고 쿼리 한번 돌려보고. 효율성 같은 거 많이 고려해보고 결정해보라.




> 길안내 기능 질문1

제공해주지 않는 것에 대해 UX적으로 어떻게 풀 것인가...?
이건 나도 백엔드라 잘 모르겠음...;; QA도 디자이너랑 협의해서 개발자랑 보는 건데...; 기술 질문이 아니라 너무 어렵다.
제공해주지 않는다면 개발자는 ‘ㅇㅇ 없다. 제공안해주는 거기 때문에 답없다. 문구 만들어야된다.’ 해주면 끝임. 그 문구는 기획자랑 상의함.

해당 지역에 대해서는 안내해드릴 수 없습니다. 이런 식으로 alert 띄우고 마는데 UX 띄우는 거라 답변 띄우기 어려움.

제공하지 않습니다 보다는 추후 업데이트 예정입니다 이런 문구 내주기도 한다.

> 질문 2

이 API는 대안이 있는 것임. 2번 선택지로 대안을 제공해주는 것이 좋다.
프론트나 기획자가 따로 붙는지? 안내문구 하나 띄우거나 모달 띄워서 대안 보내주기.

API 들쭉날쭉할 때?
지도는 많이 안해봤고 인증이나 회원 통합, 채팅 시스템은 많이 해봤슴.
API를 많이 받으면 자체적으로 validation을 체크하는 로직 있는지?
체크할 수 있는 부분이 있다면 validation을 체크해주고 해주면 좋은데
API는 response Code 보면 재시도 가능한 코드가 있을 것이다.
그거 확인해보는게 좋을 것 같음.

지도는 MCP 연결해주고 하는 툴 제공하나?
토스에는 MCP 이용하는 툴이 있다. 그런거 있다면 이용해보면 좋을 듯 함.
아니면 규격 문서나 MD 형식 바꿔서 export 해서 agent 들에 입력해서 처리할 수 있게 했다. 이런 식으로 추가하면 좋을 것 같음.
툴 사용을 요즘 회사들이 중히 여기는 듯하니 고려해보도록.

> 질문3

PM이나 담당자가 외부 API 연동하는 회사에서 메일같은 것이 온다.
규격서가 바뀜. deprecated 된다. 내용을 받음.
개발자한테 문서나 변경된 사항 전달. 또는 개발자가 직접 받아 인지함.
사람이 하는 일이라 가끔 놓칠 때가 있다.
이때에 대한 대응방법 알려주겠다.
Toss Pay 쪽에서 nullable이 아닌 데이터가 갑자기 null이 들어와 경영지원 팀에서 그걸 안알려준 적이 있다.
결제 시스템은 중요한 것이니 바로 에러에 대해 인지해야 함.
외부 API 쏘는 트랜잭션은 많이 나눈다.
쏘는 거, 받은 거, 그걸 저장하는 거, 내외부에서 실수 트랜잭션이 나뉘어져있는데 slack으로 실시간 연결해 오게하는 방식이 어떻냐는 의견이 나오긴 했었음. 결제는 중요도가 높아 이렇게 처리함.
모니터링 시스템이긴 한데 어떤 걸 쓸 것인지는 모르겠다.
Grafana?
차후에 넣어볼 것이니, 그런 식으로 우리가 관리해도 된다. API 실수인지, 우리쪽 실수인지. 그런 식으로도 관리할 수 있다.
보통은 문서로 오고 다 변경하면 되서 큰 문제 없다.
이런 시긍로 중요도 높은 것 관리 가능.


> 충전소 위치 찾기 기능

충전소는 위치가 많이 바뀌지 않으니 레디스 캐시를 쓰는 것을 추천함.
코드 레벨에서 짤 대 유심히 고려해야 하는 게 다중 인스턴스를 띄운다.
그걸 한 번 잘 생각해보고 코딩하는 게 중요하다. 고가용성이기도 하고..
레디스 캐시나 그게 아니더라도 Ehcache 같은 백엔드 쪽 캐시를 써보던가...
캐싱 처리 함 해보는게 좋을 것 같다.

지역별 group by 하는 것도 캐싱처리 하는 것이 좋다.
그 데이터의 정확도는 중요하지 않아도 된다.
캐싱 TTL 기간을 더 길게 잡아도 되고... 레디스 캐시는 다중 클러스터로 올리니 캐시 변경에 대한 전파도 처리해줘야 함.

Native한 실행계획 쿼리도 짜보고 하셨으면 좋겠음~


> 준원님 추가 질문
> 공공 데이터에서 보장구 위치를 조회해서 테이블을 만들어놓고 사용자의 리뷰를 받아 정보 데이터가 수정되는 형태임.
> 공공데이터로 반기마다 최신화한다. 이걸 다 들고와서 업데이트해야 하는데, 업데이트 시에는 삭제하고 새로 넣으려고함.
> 이런 대용량 데이터를 업데이트할 때 어떤 처리방법이 좋은지...?

JPA는 안 쓰는 게 좋다. 느리다.
saveAll 해도 배치 사이즈 넣고 하긴 하는데... JPA, myBatis, JDBC native Query 했을 때 native가 제일 빠르긴 하다.
native Query 했을 때 가장 성능이 좋고 빠르기 때문에 안 쓸 이유가 없으니 함 해보셈. 실패할 수 있는데, 어떻게 잘 인지 받는 시스템을 구현하는 것이 모니터링 시스템인데 그것도 중요하다. 공공 데이터 테이블 DDL을 안받았긴 한데... 날리는 방식 맞긴함.
시퀀스 자체가 AutoIncrement 같은 코드가 있으면 문제가 된다.
시퀀스 주기는 하는데... 문제는 이게 외부데이터니 안 줄수도 있다. 지들 맴대로임.
우리쪽에서 관리하는 시퀀스가 있어야 편하다!
고유넘버가 있다면 관리한다는 뜻, 변경된 것만 업데이트하는 게 맞는 것 같다. 우리도 해봤는데 학교 데이터 실수한 적 있다.
실수할 수 있는 부분 있으니 시퀀스 하나를 우리가 관리하는 것이 나을 것 같다.

새벽에 쓴다고 하면 배치 하나 때문에 서비스 일시중지 띄우는 건 조금 그렇긴 한데 그정도는 아닌 것 같고 그 정도면 데이터 하나하나 업데이트해도 됨.


> 일정관리 어떻게 할까요...

개발팀장이 개발일정 산정해서 상부 보고~ 한명 빠져서 딜레이 될 것 같슴돠~
안된다. 일정 맞춰라. 내려오면 위에서 까라면 까야해서 맞추긴 해야 한다.

Githook 을 이용해서 스크립트로 코드 레벨 Merge를 튕겨낼 수도 있다.
Branch Rule 말고도 다른 방법 있음.

그리고 카프카 씀?
Rest API만 쓰는 게 아니고 SSE 도 써야하니... 클라이언트 수신 받아야 하니 이것도 함 잘 처리해보셈.
중간에 Nginx 붙여서 SSE에 설정값들 몇개 바꿔줘야 한다. 복잡도가 올라가고 다중 인스턴스 올라가는 것이니 Redis Pub/Sub 써도 되고.
현업 스펙은 공부하는 사람 스펙이랑 거의 비슷한다.
RabbitMQ 안써봤는데 카프카는 rebalancing이란 게 있다. 알림 푸시 나가는 게 세팅 잘못해서 중복으로 6~7개 나간 거 있었다. 테스트 많이 함 해봤으면 좋겠다.
래빗MQ에도 아마 비슷한 거 있을 것임.

고도화한다면 CQRS 패턴도 고려해볼 것

Java Stream 자주 쓰는데 안 좋아하는 사람도 많더라... 람다식 싫어하는 사람 있는데 자바 레벨에서 왜 써야 하는지, 오버헤드 없는지도 고민해야 할 요소.

List 같은 거는 캐퍼시티도 넣는 것도 넣으면 좋음
사이즈 안 정하면 계속 늘어남 -> 오버헤드. 이것들의 최적화도 고민할 것.

SI 쪽 네트워크 엔지니어 매우 파는 사람있다. 도커 같은 거...
좋긴 한데, 그런 건 다 팀들이 있어 전부 신경을 안 써도 된다. 어느정도 돌릴 수준만 되면 됨.
자바 어떻게 해야 잘 써볼까. 패턴 자체에 대한 고민, 래빗MQ...

> 기술 선정 같은 건 위에서 내려오나 아래에서 제안하나?

회사마다 다름.
이런 기술 사용하려 한다 제안서를 시니어에게 내고 ㅇㅋ 해라. 내려오던가... 아니면 상부에 상무님이랑 얘기해볼게 제안 하게 됨.
이런 건 trade off에 대한 내용을 넣어야 되며 안 좋은 점도 꼭 써줘야 함.
JPA도 경계별, 도메인별 나누면 좋긴 한데 사람이 하면 문제 생길 수 밖에 없다. 사람이 하다 보니.... 
이런 기술 스펙 썼는데 왜 쓸까에 대해... 깊게 생각해보기. 제안서는 거창하니 일기로 써보던지.
이런 부분 본인도 찔린다. 자바 개발자인데 왜 갑자기 C 공부함? 비전공자라 로우레벨까지 알고 싶었다. 자바 개발자라매 갈!! 당한 적 있다.
코틀린도 기회되면 해보고...

취업시작 걱정쓰..
AI 기능 툴들 이런 툴을 커스터마이징 삐리릿 하면 좀 해봤다도르 같은?
Showing Off 같은 자랑질 많이하는 SNS (링크드인) 이런 거 잘하면 신입중에 취업되는 사람도 있다.
기술 블로그도 올리고 자랑질도 하고. 이상한 사람 진짜 많이 한다.
다른 사람 이력서 보면 돚거질해서 이 사람꺼 부족하구나! 이 사람꺼 잘하는구나! 하는 것들이 있다.

---

카카오 주소로 좌표변환 API
https://developers.kakao.com/docs/latest/ko/local/dev-guide

문서로 작성
